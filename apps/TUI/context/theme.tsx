import { createContext, useContext, createSignal, createMemo, type JSX, type Accessor } from "solid-js";
import { useKV } from "./kv";

export type ThemeColors = {
  // Core semantic
  primary: string;
  secondary: string;
  accent: string;
  error: string;
  warning: string;
  success: string;
  info: string;

  // Text
  text: string;
  textMuted: string;

  // Backgrounds
  background: string;
  backgroundPanel: string;
  backgroundElement: string;
  backgroundMenu: string;

  // Borders
  border: string;
  borderActive: string;
  borderSubtle: string;

  // Diff
  diffAdded: string;
  diffRemoved: string;
  diffContext: string;
  diffAddedBg: string;
  diffRemovedBg: string;
  diffHunkHeader: string;
  diffLineNumber: string;

  // Markdown
  markdownText: string;
  markdownHeading: string;
  markdownLink: string;
  markdownCode: string;
  markdownBlockquote: string;
  markdownEmphasis: string;

  // Syntax highlighting
  syntaxComment: string;
  syntaxKeyword: string;
  syntaxFunction: string;
  syntaxVariable: string;
  syntaxString: string;
  syntaxNumber: string;
  syntaxType: string;
  syntaxOperator: string;
  syntaxPunctuation: string;

  // Thinking
  thinkingOpacity: number;
};

export type ThemeDefinition = {
  name: string;
  appearance: "dark" | "light";
  colors: ThemeColors;
};

// ── Built-in themes ──────────────────────────────────────────────────────────

const OPENCODE_DARK: ThemeColors = {
  primary: "#82AAFF",
  secondary: "#C792EA",
  accent: "#89DDFF",
  error: "#FF5370",
  warning: "#FFCB6B",
  success: "#C3E88D",
  info: "#82AAFF",
  text: "#EEFFFF",
  textMuted: "#546E7A",
  background: "#0B1015",
  backgroundPanel: "#121820",
  backgroundElement: "#1A2332",
  backgroundMenu: "#0D1117",
  border: "#1E2D3D",
  borderActive: "#82AAFF",
  borderSubtle: "#152230",
  diffAdded: "#C3E88D",
  diffRemoved: "#FF5370",
  diffContext: "#546E7A",
  diffAddedBg: "#1A2E1A",
  diffRemovedBg: "#2E1A1A",
  diffHunkHeader: "#82AAFF",
  diffLineNumber: "#546E7A",
  markdownText: "#EEFFFF",
  markdownHeading: "#82AAFF",
  markdownLink: "#89DDFF",
  markdownCode: "#C792EA",
  markdownBlockquote: "#546E7A",
  markdownEmphasis: "#FFCB6B",
  syntaxComment: "#546E7A",
  syntaxKeyword: "#C792EA",
  syntaxFunction: "#82AAFF",
  syntaxVariable: "#EEFFFF",
  syntaxString: "#C3E88D",
  syntaxNumber: "#F78C6C",
  syntaxType: "#FFCB6B",
  syntaxOperator: "#89DDFF",
  syntaxPunctuation: "#EEFFFF",
  thinkingOpacity: 0.6,
};

const CATPPUCCIN_MOCHA: ThemeColors = {
  primary: "#89B4FA",
  secondary: "#CBA6F7",
  accent: "#94E2D5",
  error: "#F38BA8",
  warning: "#F9E2AF",
  success: "#A6E3A1",
  info: "#89B4FA",
  text: "#CDD6F4",
  textMuted: "#6C7086",
  background: "#1E1E2E",
  backgroundPanel: "#24273A",
  backgroundElement: "#313244",
  backgroundMenu: "#181825",
  border: "#45475A",
  borderActive: "#89B4FA",
  borderSubtle: "#313244",
  diffAdded: "#A6E3A1",
  diffRemoved: "#F38BA8",
  diffContext: "#6C7086",
  diffAddedBg: "#1E3A2E",
  diffRemovedBg: "#3A1E2E",
  diffHunkHeader: "#89B4FA",
  diffLineNumber: "#6C7086",
  markdownText: "#CDD6F4",
  markdownHeading: "#89B4FA",
  markdownLink: "#94E2D5",
  markdownCode: "#CBA6F7",
  markdownBlockquote: "#6C7086",
  markdownEmphasis: "#F9E2AF",
  syntaxComment: "#6C7086",
  syntaxKeyword: "#CBA6F7",
  syntaxFunction: "#89B4FA",
  syntaxVariable: "#CDD6F4",
  syntaxString: "#A6E3A1",
  syntaxNumber: "#FAB387",
  syntaxType: "#F9E2AF",
  syntaxOperator: "#94E2D5",
  syntaxPunctuation: "#BAC2DE",
  thinkingOpacity: 0.6,
};

const DRACULA: ThemeColors = {
  primary: "#BD93F9",
  secondary: "#FF79C6",
  accent: "#8BE9FD",
  error: "#FF5555",
  warning: "#F1FA8C",
  success: "#50FA7B",
  info: "#8BE9FD",
  text: "#F8F8F2",
  textMuted: "#6272A4",
  background: "#282A36",
  backgroundPanel: "#44475A",
  backgroundElement: "#383A4A",
  backgroundMenu: "#21222C",
  border: "#6272A4",
  borderActive: "#BD93F9",
  borderSubtle: "#44475A",
  diffAdded: "#50FA7B",
  diffRemoved: "#FF5555",
  diffContext: "#6272A4",
  diffAddedBg: "#1A3A1A",
  diffRemovedBg: "#3A1A1A",
  diffHunkHeader: "#BD93F9",
  diffLineNumber: "#6272A4",
  markdownText: "#F8F8F2",
  markdownHeading: "#BD93F9",
  markdownLink: "#8BE9FD",
  markdownCode: "#FF79C6",
  markdownBlockquote: "#6272A4",
  markdownEmphasis: "#F1FA8C",
  syntaxComment: "#6272A4",
  syntaxKeyword: "#FF79C6",
  syntaxFunction: "#50FA7B",
  syntaxVariable: "#F8F8F2",
  syntaxString: "#F1FA8C",
  syntaxNumber: "#BD93F9",
  syntaxType: "#8BE9FD",
  syntaxOperator: "#FF79C6",
  syntaxPunctuation: "#F8F8F2",
  thinkingOpacity: 0.6,
};

const NORD: ThemeColors = {
  primary: "#88C0D0",
  secondary: "#81A1C1",
  accent: "#8FBCBB",
  error: "#BF616A",
  warning: "#EBCB8B",
  success: "#A3BE8C",
  info: "#88C0D0",
  text: "#ECEFF4",
  textMuted: "#4C566A",
  background: "#2E3440",
  backgroundPanel: "#3B4252",
  backgroundElement: "#434C5E",
  backgroundMenu: "#242933",
  border: "#4C566A",
  borderActive: "#88C0D0",
  borderSubtle: "#3B4252",
  diffAdded: "#A3BE8C",
  diffRemoved: "#BF616A",
  diffContext: "#4C566A",
  diffAddedBg: "#2E3A2E",
  diffRemovedBg: "#3A2E2E",
  diffHunkHeader: "#88C0D0",
  diffLineNumber: "#4C566A",
  markdownText: "#ECEFF4",
  markdownHeading: "#88C0D0",
  markdownLink: "#8FBCBB",
  markdownCode: "#81A1C1",
  markdownBlockquote: "#4C566A",
  markdownEmphasis: "#EBCB8B",
  syntaxComment: "#4C566A",
  syntaxKeyword: "#81A1C1",
  syntaxFunction: "#88C0D0",
  syntaxVariable: "#ECEFF4",
  syntaxString: "#A3BE8C",
  syntaxNumber: "#B48EAD",
  syntaxType: "#EBCB8B",
  syntaxOperator: "#81A1C1",
  syntaxPunctuation: "#D8DEE9",
  thinkingOpacity: 0.6,
};

const TOKYONIGHT: ThemeColors = {
  primary: "#7AA2F7",
  secondary: "#BB9AF7",
  accent: "#7DCFFF",
  error: "#F7768E",
  warning: "#E0AF68",
  success: "#9ECE6A",
  info: "#7AA2F7",
  text: "#C0CAF5",
  textMuted: "#565F89",
  background: "#1A1B26",
  backgroundPanel: "#24283B",
  backgroundElement: "#292E42",
  backgroundMenu: "#16161E",
  border: "#3B4261",
  borderActive: "#7AA2F7",
  borderSubtle: "#24283B",
  diffAdded: "#9ECE6A",
  diffRemoved: "#F7768E",
  diffContext: "#565F89",
  diffAddedBg: "#1A2E1A",
  diffRemovedBg: "#2E1A1A",
  diffHunkHeader: "#7AA2F7",
  diffLineNumber: "#565F89",
  markdownText: "#C0CAF5",
  markdownHeading: "#7AA2F7",
  markdownLink: "#7DCFFF",
  markdownCode: "#BB9AF7",
  markdownBlockquote: "#565F89",
  markdownEmphasis: "#E0AF68",
  syntaxComment: "#565F89",
  syntaxKeyword: "#BB9AF7",
  syntaxFunction: "#7AA2F7",
  syntaxVariable: "#C0CAF5",
  syntaxString: "#9ECE6A",
  syntaxNumber: "#FF9E64",
  syntaxType: "#E0AF68",
  syntaxOperator: "#7DCFFF",
  syntaxPunctuation: "#C0CAF5",
  thinkingOpacity: 0.6,
};

const GRUVBOX: ThemeColors = {
  primary: "#83A598",
  secondary: "#D3869B",
  accent: "#8EC07C",
  error: "#FB4934",
  warning: "#FABD2F",
  success: "#B8BB26",
  info: "#83A598",
  text: "#EBDBB2",
  textMuted: "#665C54",
  background: "#282828",
  backgroundPanel: "#3C3836",
  backgroundElement: "#504945",
  backgroundMenu: "#1D2021",
  border: "#504945",
  borderActive: "#83A598",
  borderSubtle: "#3C3836",
  diffAdded: "#B8BB26",
  diffRemoved: "#FB4934",
  diffContext: "#665C54",
  diffAddedBg: "#2E3A1A",
  diffRemovedBg: "#3A1A1A",
  diffHunkHeader: "#83A598",
  diffLineNumber: "#665C54",
  markdownText: "#EBDBB2",
  markdownHeading: "#83A598",
  markdownLink: "#8EC07C",
  markdownCode: "#D3869B",
  markdownBlockquote: "#665C54",
  markdownEmphasis: "#FABD2F",
  syntaxComment: "#665C54",
  syntaxKeyword: "#FB4934",
  syntaxFunction: "#FABD2F",
  syntaxVariable: "#EBDBB2",
  syntaxString: "#B8BB26",
  syntaxNumber: "#D3869B",
  syntaxType: "#FE8019",
  syntaxOperator: "#8EC07C",
  syntaxPunctuation: "#EBDBB2",
  thinkingOpacity: 0.6,
};

const ROSEPINE: ThemeColors = {
  primary: "#C4A7E7",
  secondary: "#F6C177",
  accent: "#EBBCBA",
  error: "#EB6F92",
  warning: "#F6C177",
  success: "#31748F",
  info: "#9CCFD8",
  text: "#E0DEF4",
  textMuted: "#6E6A86",
  background: "#191724",
  backgroundPanel: "#1F1D2E",
  backgroundElement: "#26233A",
  backgroundMenu: "#15131E",
  border: "#403D52",
  borderActive: "#C4A7E7",
  borderSubtle: "#26233A",
  diffAdded: "#31748F",
  diffRemoved: "#EB6F92",
  diffContext: "#6E6A86",
  diffAddedBg: "#1A2E2E",
  diffRemovedBg: "#2E1A1A",
  diffHunkHeader: "#C4A7E7",
  diffLineNumber: "#6E6A86",
  markdownText: "#E0DEF4",
  markdownHeading: "#C4A7E7",
  markdownLink: "#9CCFD8",
  markdownCode: "#EBBCBA",
  markdownBlockquote: "#6E6A86",
  markdownEmphasis: "#F6C177",
  syntaxComment: "#6E6A86",
  syntaxKeyword: "#C4A7E7",
  syntaxFunction: "#EBBCBA",
  syntaxVariable: "#E0DEF4",
  syntaxString: "#F6C177",
  syntaxNumber: "#EB6F92",
  syntaxType: "#9CCFD8",
  syntaxOperator: "#C4A7E7",
  syntaxPunctuation: "#908CAA",
  thinkingOpacity: 0.6,
};

const SOLARIZED: ThemeColors = {
  primary: "#268BD2",
  secondary: "#6C71C4",
  accent: "#2AA198",
  error: "#DC322F",
  warning: "#B58900",
  success: "#859900",
  info: "#268BD2",
  text: "#839496",
  textMuted: "#586E75",
  background: "#002B36",
  backgroundPanel: "#073642",
  backgroundElement: "#0A3F4E",
  backgroundMenu: "#001F27",
  border: "#586E75",
  borderActive: "#268BD2",
  borderSubtle: "#073642",
  diffAdded: "#859900",
  diffRemoved: "#DC322F",
  diffContext: "#586E75",
  diffAddedBg: "#1A2E1A",
  diffRemovedBg: "#2E1A1A",
  diffHunkHeader: "#268BD2",
  diffLineNumber: "#586E75",
  markdownText: "#839496",
  markdownHeading: "#268BD2",
  markdownLink: "#2AA198",
  markdownCode: "#6C71C4",
  markdownBlockquote: "#586E75",
  markdownEmphasis: "#B58900",
  syntaxComment: "#586E75",
  syntaxKeyword: "#859900",
  syntaxFunction: "#268BD2",
  syntaxVariable: "#839496",
  syntaxString: "#2AA198",
  syntaxNumber: "#D33682",
  syntaxType: "#B58900",
  syntaxOperator: "#6C71C4",
  syntaxPunctuation: "#839496",
  thinkingOpacity: 0.6,
};

const MONOKAI: ThemeColors = {
  primary: "#66D9EF",
  secondary: "#AE81FF",
  accent: "#A6E22E",
  error: "#F92672",
  warning: "#E6DB74",
  success: "#A6E22E",
  info: "#66D9EF",
  text: "#F8F8F2",
  textMuted: "#75715E",
  background: "#272822",
  backgroundPanel: "#3E3D32",
  backgroundElement: "#49483E",
  backgroundMenu: "#1E1F1C",
  border: "#75715E",
  borderActive: "#66D9EF",
  borderSubtle: "#3E3D32",
  diffAdded: "#A6E22E",
  diffRemoved: "#F92672",
  diffContext: "#75715E",
  diffAddedBg: "#2E3A1A",
  diffRemovedBg: "#3A1A1A",
  diffHunkHeader: "#66D9EF",
  diffLineNumber: "#75715E",
  markdownText: "#F8F8F2",
  markdownHeading: "#66D9EF",
  markdownLink: "#A6E22E",
  markdownCode: "#AE81FF",
  markdownBlockquote: "#75715E",
  markdownEmphasis: "#E6DB74",
  syntaxComment: "#75715E",
  syntaxKeyword: "#F92672",
  syntaxFunction: "#A6E22E",
  syntaxVariable: "#F8F8F2",
  syntaxString: "#E6DB74",
  syntaxNumber: "#AE81FF",
  syntaxType: "#66D9EF",
  syntaxOperator: "#F92672",
  syntaxPunctuation: "#F8F8F2",
  thinkingOpacity: 0.6,
};

const ONE_DARK: ThemeColors = {
  primary: "#61AFEF",
  secondary: "#C678DD",
  accent: "#56B6C2",
  error: "#E06C75",
  warning: "#E5C07B",
  success: "#98C379",
  info: "#61AFEF",
  text: "#ABB2BF",
  textMuted: "#5C6370",
  background: "#282C34",
  backgroundPanel: "#21252B",
  backgroundElement: "#2C313A",
  backgroundMenu: "#1B1F27",
  border: "#3E4451",
  borderActive: "#61AFEF",
  borderSubtle: "#2C313A",
  diffAdded: "#98C379",
  diffRemoved: "#E06C75",
  diffContext: "#5C6370",
  diffAddedBg: "#1A2E1A",
  diffRemovedBg: "#2E1A1A",
  diffHunkHeader: "#61AFEF",
  diffLineNumber: "#5C6370",
  markdownText: "#ABB2BF",
  markdownHeading: "#61AFEF",
  markdownLink: "#56B6C2",
  markdownCode: "#C678DD",
  markdownBlockquote: "#5C6370",
  markdownEmphasis: "#E5C07B",
  syntaxComment: "#5C6370",
  syntaxKeyword: "#C678DD",
  syntaxFunction: "#61AFEF",
  syntaxVariable: "#ABB2BF",
  syntaxString: "#98C379",
  syntaxNumber: "#D19A66",
  syntaxType: "#E5C07B",
  syntaxOperator: "#56B6C2",
  syntaxPunctuation: "#ABB2BF",
  thinkingOpacity: 0.6,
};

const AURA: ThemeColors = {
  primary: "#A277FF",
  secondary: "#F694FF",
  accent: "#A277FF",
  error: "#FF6767",
  warning: "#FFCA85",
  success: "#61FFCA",
  info: "#A277FF",
  text: "#EDECEE",
  textMuted: "#6D6D6D",
  background: "#0F0F0F",
  backgroundPanel: "#15141B",
  backgroundElement: "#15141B",
  backgroundMenu: "#0A0A0E",
  border: "#2D2D2D",
  borderActive: "#6D6D6D",
  borderSubtle: "#2D2D2D",
  diffAdded: "#61FFCA",
  diffRemoved: "#FF6767",
  diffContext: "#6D6D6D",
  diffAddedBg: "#0F2E20",
  diffRemovedBg: "#2E0F0F",
  diffHunkHeader: "#A277FF",
  diffLineNumber: "#6D6D6D",
  markdownText: "#EDECEE",
  markdownHeading: "#A277FF",
  markdownLink: "#82E2FF",
  markdownCode: "#F694FF",
  markdownBlockquote: "#6D6D6D",
  markdownEmphasis: "#FFCA85",
  syntaxComment: "#6D6D6D",
  syntaxKeyword: "#A277FF",
  syntaxFunction: "#82E2FF",
  syntaxVariable: "#EDECEE",
  syntaxString: "#61FFCA",
  syntaxNumber: "#F694FF",
  syntaxType: "#FFCA85",
  syntaxOperator: "#A277FF",
  syntaxPunctuation: "#EDECEE",
  thinkingOpacity: 0.6,
};

const AYU: ThemeColors = {
  primary: "#59C2FF",
  secondary: "#D2A6FF",
  accent: "#E6B450",
  error: "#D95757",
  warning: "#E6B673",
  success: "#7FD962",
  info: "#39BAE6",
  text: "#BFBDB6",
  textMuted: "#565B66",
  background: "#0B0E14",
  backgroundPanel: "#0F131A",
  backgroundElement: "#0D1017",
  backgroundMenu: "#090C10",
  border: "#6C7380",
  borderActive: "#6C7380",
  borderSubtle: "#11151C",
  diffAdded: "#7FD962",
  diffRemoved: "#F26D78",
  diffContext: "#565B66",
  diffAddedBg: "#1A2E1A",
  diffRemovedBg: "#2E1A1A",
  diffHunkHeader: "#59C2FF",
  diffLineNumber: "#565B66",
  markdownText: "#BFBDB6",
  markdownHeading: "#59C2FF",
  markdownLink: "#39BAE6",
  markdownCode: "#D2A6FF",
  markdownBlockquote: "#565B66",
  markdownEmphasis: "#E6B673",
  syntaxComment: "#ACB6BF",
  syntaxKeyword: "#FF8F40",
  syntaxFunction: "#FFB454",
  syntaxVariable: "#BFBDB6",
  syntaxString: "#AAD94C",
  syntaxNumber: "#D2A6FF",
  syntaxType: "#59C2FF",
  syntaxOperator: "#F29668",
  syntaxPunctuation: "#BFBDB6",
  thinkingOpacity: 0.6,
};

const CARBONFOX: ThemeColors = {
  primary: "#33B1FF",
  secondary: "#FF7EB6",
  accent: "#42BE65",
  error: "#EE5396",
  warning: "#F1C21B",
  success: "#42BE65",
  info: "#33B1FF",
  text: "#F2F4F8",
  textMuted: "#525252",
  background: "#161616",
  backgroundPanel: "#262626",
  backgroundElement: "#393939",
  backgroundMenu: "#0D0D0D",
  border: "#525252",
  borderActive: "#33B1FF",
  borderSubtle: "#393939",
  diffAdded: "#42BE65",
  diffRemoved: "#EE5396",
  diffContext: "#525252",
  diffAddedBg: "#1A2E1A",
  diffRemovedBg: "#2E1A1A",
  diffHunkHeader: "#33B1FF",
  diffLineNumber: "#525252",
  markdownText: "#F2F4F8",
  markdownHeading: "#33B1FF",
  markdownLink: "#78A9FF",
  markdownCode: "#FF7EB6",
  markdownBlockquote: "#525252",
  markdownEmphasis: "#F1C21B",
  syntaxComment: "#525252",
  syntaxKeyword: "#FF7EB6",
  syntaxFunction: "#33B1FF",
  syntaxVariable: "#F2F4F8",
  syntaxString: "#42BE65",
  syntaxNumber: "#BE95FF",
  syntaxType: "#F1C21B",
  syntaxOperator: "#78A9FF",
  syntaxPunctuation: "#F2F4F8",
  thinkingOpacity: 0.6,
};

const CATPPUCCIN_FRAPPE: ThemeColors = {
  primary: "#8DA4E2",
  secondary: "#CA9EE6",
  accent: "#F4B8E4",
  error: "#E78284",
  warning: "#E5C890",
  success: "#A6D189",
  info: "#81C8BE",
  text: "#C6D0F5",
  textMuted: "#B5BFE2",
  background: "#303446",
  backgroundPanel: "#292C3C",
  backgroundElement: "#232634",
  backgroundMenu: "#1E2030",
  border: "#414559",
  borderActive: "#51576D",
  borderSubtle: "#626880",
  diffAdded: "#A6D189",
  diffRemoved: "#E78284",
  diffContext: "#B5BFE2",
  diffAddedBg: "#1E3A2E",
  diffRemovedBg: "#3A1E2E",
  diffHunkHeader: "#8DA4E2",
  diffLineNumber: "#B5BFE2",
  markdownText: "#C6D0F5",
  markdownHeading: "#8DA4E2",
  markdownLink: "#81C8BE",
  markdownCode: "#CA9EE6",
  markdownBlockquote: "#B5BFE2",
  markdownEmphasis: "#E5C890",
  syntaxComment: "#B5BFE2",
  syntaxKeyword: "#CA9EE6",
  syntaxFunction: "#8DA4E2",
  syntaxVariable: "#C6D0F5",
  syntaxString: "#A6D189",
  syntaxNumber: "#EF9F76",
  syntaxType: "#E5C890",
  syntaxOperator: "#81C8BE",
  syntaxPunctuation: "#C6D0F5",
  thinkingOpacity: 0.6,
};

const CATPPUCCIN_LATTE: ThemeColors = {
  primary: "#1E66F5",
  secondary: "#8839EF",
  accent: "#EA76CB",
  error: "#D20F39",
  warning: "#DF8E1D",
  success: "#40A02B",
  info: "#179299",
  text: "#4C4F69",
  textMuted: "#9CA0B0",
  background: "#EFF1F5",
  backgroundPanel: "#E6E9EF",
  backgroundElement: "#DCE0E8",
  backgroundMenu: "#CCD0DA",
  border: "#ACB0BE",
  borderActive: "#1E66F5",
  borderSubtle: "#BCC0CC",
  diffAdded: "#40A02B",
  diffRemoved: "#D20F39",
  diffContext: "#9CA0B0",
  diffAddedBg: "#D7F5D0",
  diffRemovedBg: "#F5D0D0",
  diffHunkHeader: "#1E66F5",
  diffLineNumber: "#9CA0B0",
  markdownText: "#4C4F69",
  markdownHeading: "#1E66F5",
  markdownLink: "#179299",
  markdownCode: "#8839EF",
  markdownBlockquote: "#9CA0B0",
  markdownEmphasis: "#DF8E1D",
  syntaxComment: "#9CA0B0",
  syntaxKeyword: "#8839EF",
  syntaxFunction: "#1E66F5",
  syntaxVariable: "#4C4F69",
  syntaxString: "#40A02B",
  syntaxNumber: "#FE640B",
  syntaxType: "#DF8E1D",
  syntaxOperator: "#179299",
  syntaxPunctuation: "#4C4F69",
  thinkingOpacity: 0.6,
};

const COBALT2: ThemeColors = {
  primary: "#0088FF",
  secondary: "#FF9D00",
  accent: "#2AFFDF",
  error: "#FF0088",
  warning: "#FF9D00",
  success: "#2AFFDF",
  info: "#0088FF",
  text: "#FFFFFF",
  textMuted: "#0D3A58",
  background: "#193549",
  backgroundPanel: "#15232D",
  backgroundElement: "#1F4662",
  backgroundMenu: "#0D1F2D",
  border: "#0D3A58",
  borderActive: "#0088FF",
  borderSubtle: "#0D3A58",
  diffAdded: "#2AFFDF",
  diffRemoved: "#FF628C",
  diffContext: "#0D3A58",
  diffAddedBg: "#0D3A3A",
  diffRemovedBg: "#3A0D1A",
  diffHunkHeader: "#0088FF",
  diffLineNumber: "#0D3A58",
  markdownText: "#FFFFFF",
  markdownHeading: "#0088FF",
  markdownLink: "#2AFFDF",
  markdownCode: "#FF9D00",
  markdownBlockquote: "#0D3A58",
  markdownEmphasis: "#FF9D00",
  syntaxComment: "#0D3A58",
  syntaxKeyword: "#FF9D00",
  syntaxFunction: "#0088FF",
  syntaxVariable: "#FFFFFF",
  syntaxString: "#2AFFDF",
  syntaxNumber: "#FF628C",
  syntaxType: "#FF9D00",
  syntaxOperator: "#0088FF",
  syntaxPunctuation: "#FFFFFF",
  thinkingOpacity: 0.6,
};

const CURSOR: ThemeColors = {
  primary: "#88C0D0",
  secondary: "#81A1C1",
  accent: "#3FA266",
  error: "#E34671",
  warning: "#EBCB8B",
  success: "#3FA266",
  info: "#88C0D0",
  text: "#E4E4E4",
  textMuted: "#6C6C6C",
  background: "#181818",
  backgroundPanel: "#202020",
  backgroundElement: "#2A2A2A",
  backgroundMenu: "#141414",
  border: "#3A3A3A",
  borderActive: "#88C0D0",
  borderSubtle: "#2A2A2A",
  diffAdded: "#3FA266",
  diffRemoved: "#E34671",
  diffContext: "#6C6C6C",
  diffAddedBg: "#1A2E1A",
  diffRemovedBg: "#2E1A1A",
  diffHunkHeader: "#88C0D0",
  diffLineNumber: "#6C6C6C",
  markdownText: "#E4E4E4",
  markdownHeading: "#88C0D0",
  markdownLink: "#81A1C1",
  markdownCode: "#3FA266",
  markdownBlockquote: "#6C6C6C",
  markdownEmphasis: "#EBCB8B",
  syntaxComment: "#6C6C6C",
  syntaxKeyword: "#81A1C1",
  syntaxFunction: "#88C0D0",
  syntaxVariable: "#E4E4E4",
  syntaxString: "#3FA266",
  syntaxNumber: "#B48EAD",
  syntaxType: "#EBCB8B",
  syntaxOperator: "#81A1C1",
  syntaxPunctuation: "#E4E4E4",
  thinkingOpacity: 0.6,
};

const EVERFOREST: ThemeColors = {
  primary: "#A7C080",
  secondary: "#D699B6",
  accent: "#83C092",
  error: "#E67E80",
  warning: "#DBBC7F",
  success: "#A7C080",
  info: "#7FBBB3",
  text: "#D3C6AA",
  textMuted: "#859289",
  background: "#2D353B",
  backgroundPanel: "#343F44",
  backgroundElement: "#3D484D",
  backgroundMenu: "#272E33",
  border: "#475258",
  borderActive: "#A7C080",
  borderSubtle: "#3D484D",
  diffAdded: "#A7C080",
  diffRemoved: "#E67E80",
  diffContext: "#859289",
  diffAddedBg: "#2E3A2E",
  diffRemovedBg: "#3A2E2E",
  diffHunkHeader: "#7FBBB3",
  diffLineNumber: "#859289",
  markdownText: "#D3C6AA",
  markdownHeading: "#A7C080",
  markdownLink: "#7FBBB3",
  markdownCode: "#D699B6",
  markdownBlockquote: "#859289",
  markdownEmphasis: "#DBBC7F",
  syntaxComment: "#859289",
  syntaxKeyword: "#E67E80",
  syntaxFunction: "#A7C080",
  syntaxVariable: "#D3C6AA",
  syntaxString: "#83C092",
  syntaxNumber: "#D699B6",
  syntaxType: "#DBBC7F",
  syntaxOperator: "#E69875",
  syntaxPunctuation: "#D3C6AA",
  thinkingOpacity: 0.6,
};

const FLEXOKI: ThemeColors = {
  primary: "#DA702C",
  secondary: "#8B7EC8",
  accent: "#4385BE",
  error: "#AF3029",
  warning: "#AD8301",
  success: "#66800B",
  info: "#4385BE",
  text: "#CECDC3",
  textMuted: "#878580",
  background: "#100F0F",
  backgroundPanel: "#1C1B1A",
  backgroundElement: "#282726",
  backgroundMenu: "#0A0908",
  border: "#343331",
  borderActive: "#DA702C",
  borderSubtle: "#282726",
  diffAdded: "#66800B",
  diffRemoved: "#AF3029",
  diffContext: "#878580",
  diffAddedBg: "#1A2E1A",
  diffRemovedBg: "#2E1A1A",
  diffHunkHeader: "#4385BE",
  diffLineNumber: "#878580",
  markdownText: "#CECDC3",
  markdownHeading: "#DA702C",
  markdownLink: "#4385BE",
  markdownCode: "#8B7EC8",
  markdownBlockquote: "#878580",
  markdownEmphasis: "#AD8301",
  syntaxComment: "#878580",
  syntaxKeyword: "#DA702C",
  syntaxFunction: "#4385BE",
  syntaxVariable: "#CECDC3",
  syntaxString: "#66800B",
  syntaxNumber: "#8B7EC8",
  syntaxType: "#AD8301",
  syntaxOperator: "#DA702C",
  syntaxPunctuation: "#CECDC3",
  thinkingOpacity: 0.6,
};

const GITHUB: ThemeColors = {
  primary: "#58A6FF",
  secondary: "#BC8CFF",
  accent: "#3FB950",
  error: "#F85149",
  warning: "#D29922",
  success: "#3FB950",
  info: "#58A6FF",
  text: "#C9D1D9",
  textMuted: "#8B949E",
  background: "#0D1117",
  backgroundPanel: "#161B22",
  backgroundElement: "#21262D",
  backgroundMenu: "#010409",
  border: "#30363D",
  borderActive: "#58A6FF",
  borderSubtle: "#21262D",
  diffAdded: "#3FB950",
  diffRemoved: "#F85149",
  diffContext: "#8B949E",
  diffAddedBg: "#0D2818",
  diffRemovedBg: "#2D0D0D",
  diffHunkHeader: "#58A6FF",
  diffLineNumber: "#8B949E",
  markdownText: "#C9D1D9",
  markdownHeading: "#58A6FF",
  markdownLink: "#58A6FF",
  markdownCode: "#BC8CFF",
  markdownBlockquote: "#8B949E",
  markdownEmphasis: "#D29922",
  syntaxComment: "#8B949E",
  syntaxKeyword: "#FF7B72",
  syntaxFunction: "#D2A8FF",
  syntaxVariable: "#C9D1D9",
  syntaxString: "#A5D6FF",
  syntaxNumber: "#79C0FF",
  syntaxType: "#FFA657",
  syntaxOperator: "#FF7B72",
  syntaxPunctuation: "#C9D1D9",
  thinkingOpacity: 0.6,
};

const KANAGAWA: ThemeColors = {
  primary: "#7E9CD8",
  secondary: "#957FB8",
  accent: "#D27E99",
  error: "#E82424",
  warning: "#D7A657",
  success: "#98BB6C",
  info: "#76946A",
  text: "#DCD7BA",
  textMuted: "#727169",
  background: "#1F1F28",
  backgroundPanel: "#2A2A37",
  backgroundElement: "#363646",
  backgroundMenu: "#16161D",
  border: "#54546D",
  borderActive: "#7E9CD8",
  borderSubtle: "#363646",
  diffAdded: "#98BB6C",
  diffRemoved: "#E82424",
  diffContext: "#727169",
  diffAddedBg: "#1A2E1A",
  diffRemovedBg: "#2E1A1A",
  diffHunkHeader: "#7E9CD8",
  diffLineNumber: "#727169",
  markdownText: "#DCD7BA",
  markdownHeading: "#7E9CD8",
  markdownLink: "#7FB4CA",
  markdownCode: "#957FB8",
  markdownBlockquote: "#727169",
  markdownEmphasis: "#D7A657",
  syntaxComment: "#727169",
  syntaxKeyword: "#957FB8",
  syntaxFunction: "#7E9CD8",
  syntaxVariable: "#DCD7BA",
  syntaxString: "#98BB6C",
  syntaxNumber: "#D27E99",
  syntaxType: "#D7A657",
  syntaxOperator: "#C0A36E",
  syntaxPunctuation: "#DCD7BA",
  thinkingOpacity: 0.6,
};

const MATERIAL: ThemeColors = {
  primary: "#82AAFF",
  secondary: "#C792EA",
  accent: "#89DDFF",
  error: "#F07178",
  warning: "#FFCB6B",
  success: "#C3E88D",
  info: "#82AAFF",
  text: "#EEFFFF",
  textMuted: "#546E7A",
  background: "#263238",
  backgroundPanel: "#2E3C43",
  backgroundElement: "#37474F",
  backgroundMenu: "#1E272C",
  border: "#546E7A",
  borderActive: "#82AAFF",
  borderSubtle: "#37474F",
  diffAdded: "#C3E88D",
  diffRemoved: "#F07178",
  diffContext: "#546E7A",
  diffAddedBg: "#1A2E1A",
  diffRemovedBg: "#2E1A1A",
  diffHunkHeader: "#82AAFF",
  diffLineNumber: "#546E7A",
  markdownText: "#EEFFFF",
  markdownHeading: "#82AAFF",
  markdownLink: "#89DDFF",
  markdownCode: "#C792EA",
  markdownBlockquote: "#546E7A",
  markdownEmphasis: "#FFCB6B",
  syntaxComment: "#546E7A",
  syntaxKeyword: "#C792EA",
  syntaxFunction: "#82AAFF",
  syntaxVariable: "#EEFFFF",
  syntaxString: "#C3E88D",
  syntaxNumber: "#F78C6C",
  syntaxType: "#FFCB6B",
  syntaxOperator: "#89DDFF",
  syntaxPunctuation: "#EEFFFF",
  thinkingOpacity: 0.6,
};

const MATRIX: ThemeColors = {
  primary: "#2EFF6A",
  secondary: "#1CC24B",
  accent: "#00EFFF",
  error: "#FF4B4B",
  warning: "#FFC700",
  success: "#2EFF6A",
  info: "#30B3FF",
  text: "#B3FFB3",
  textMuted: "#2A5A2A",
  background: "#0A0E0A",
  backgroundPanel: "#0D120D",
  backgroundElement: "#111A11",
  backgroundMenu: "#060806",
  border: "#1A3A1A",
  borderActive: "#2EFF6A",
  borderSubtle: "#111A11",
  diffAdded: "#2EFF6A",
  diffRemoved: "#FF4B4B",
  diffContext: "#2A5A2A",
  diffAddedBg: "#0D2E0D",
  diffRemovedBg: "#2E0D0D",
  diffHunkHeader: "#30B3FF",
  diffLineNumber: "#2A5A2A",
  markdownText: "#B3FFB3",
  markdownHeading: "#2EFF6A",
  markdownLink: "#00EFFF",
  markdownCode: "#1CC24B",
  markdownBlockquote: "#2A5A2A",
  markdownEmphasis: "#FFC700",
  syntaxComment: "#2A5A2A",
  syntaxKeyword: "#2EFF6A",
  syntaxFunction: "#1CC24B",
  syntaxVariable: "#B3FFB3",
  syntaxString: "#00EFFF",
  syntaxNumber: "#30B3FF",
  syntaxType: "#FFC700",
  syntaxOperator: "#2EFF6A",
  syntaxPunctuation: "#B3FFB3",
  thinkingOpacity: 0.6,
};

const MERCURY: ThemeColors = {
  primary: "#8DA4F5",
  secondary: "#C19CF5",
  accent: "#8DA4F5",
  error: "#B0175F",
  warning: "#C08800",
  success: "#036E43",
  info: "#007F95",
  text: "#DDDDE5",
  textMuted: "#75758B",
  background: "#171721",
  backgroundPanel: "#1E1E2A",
  backgroundElement: "#252534",
  backgroundMenu: "#12121A",
  border: "#363644",
  borderActive: "#8DA4F5",
  borderSubtle: "#252534",
  diffAdded: "#036E43",
  diffRemoved: "#B0175F",
  diffContext: "#75758B",
  diffAddedBg: "#0D2E1A",
  diffRemovedBg: "#2E0D1A",
  diffHunkHeader: "#8DA4F5",
  diffLineNumber: "#75758B",
  markdownText: "#DDDDE5",
  markdownHeading: "#8DA4F5",
  markdownLink: "#007F95",
  markdownCode: "#C19CF5",
  markdownBlockquote: "#75758B",
  markdownEmphasis: "#C08800",
  syntaxComment: "#75758B",
  syntaxKeyword: "#C19CF5",
  syntaxFunction: "#8DA4F5",
  syntaxVariable: "#DDDDE5",
  syntaxString: "#036E43",
  syntaxNumber: "#B0175F",
  syntaxType: "#C08800",
  syntaxOperator: "#8DA4F5",
  syntaxPunctuation: "#DDDDE5",
  thinkingOpacity: 0.6,
};

const NIGHTOWL: ThemeColors = {
  primary: "#82AAFF",
  secondary: "#7FDBCA",
  accent: "#C792EA",
  error: "#EF5350",
  warning: "#ECC48D",
  success: "#C5E478",
  info: "#82AAFF",
  text: "#D6DEEB",
  textMuted: "#5F7E97",
  background: "#011627",
  backgroundPanel: "#0B253A",
  backgroundElement: "#0B253A",
  backgroundMenu: "#010E1A",
  border: "#1D3B53",
  borderActive: "#82AAFF",
  borderSubtle: "#0B253A",
  diffAdded: "#C5E478",
  diffRemoved: "#EF5350",
  diffContext: "#5F7E97",
  diffAddedBg: "#0D2E1A",
  diffRemovedBg: "#2E0D0D",
  diffHunkHeader: "#82AAFF",
  diffLineNumber: "#5F7E97",
  markdownText: "#D6DEEB",
  markdownHeading: "#82AAFF",
  markdownLink: "#7FDBCA",
  markdownCode: "#C792EA",
  markdownBlockquote: "#5F7E97",
  markdownEmphasis: "#ECC48D",
  syntaxComment: "#5F7E97",
  syntaxKeyword: "#C792EA",
  syntaxFunction: "#82AAFF",
  syntaxVariable: "#D6DEEB",
  syntaxString: "#ECC48D",
  syntaxNumber: "#F78C6C",
  syntaxType: "#7FDBCA",
  syntaxOperator: "#C792EA",
  syntaxPunctuation: "#D6DEEB",
  thinkingOpacity: 0.6,
};

const ORNG: ThemeColors = {
  primary: "#EC5B2B",
  secondary: "#6BA1E6",
  accent: "#EC5B2B",
  error: "#E06C75",
  warning: "#E5C07B",
  success: "#98C379",
  info: "#6BA1E6",
  text: "#D4D4D4",
  textMuted: "#666666",
  background: "#0A0A0A",
  backgroundPanel: "#111111",
  backgroundElement: "#1A1A1A",
  backgroundMenu: "#070707",
  border: "#333333",
  borderActive: "#EC5B2B",
  borderSubtle: "#1A1A1A",
  diffAdded: "#98C379",
  diffRemoved: "#E06C75",
  diffContext: "#666666",
  diffAddedBg: "#1A2E1A",
  diffRemovedBg: "#2E1A1A",
  diffHunkHeader: "#6BA1E6",
  diffLineNumber: "#666666",
  markdownText: "#D4D4D4",
  markdownHeading: "#EC5B2B",
  markdownLink: "#6BA1E6",
  markdownCode: "#EC5B2B",
  markdownBlockquote: "#666666",
  markdownEmphasis: "#E5C07B",
  syntaxComment: "#666666",
  syntaxKeyword: "#EC5B2B",
  syntaxFunction: "#6BA1E6",
  syntaxVariable: "#D4D4D4",
  syntaxString: "#98C379",
  syntaxNumber: "#D19A66",
  syntaxType: "#E5C07B",
  syntaxOperator: "#56B6C2",
  syntaxPunctuation: "#D4D4D4",
  thinkingOpacity: 0.6,
};

const PALENIGHT: ThemeColors = {
  primary: "#82AAFF",
  secondary: "#C792EA",
  accent: "#89DDFF",
  error: "#FF5370",
  warning: "#FFCB6B",
  success: "#C3E88D",
  info: "#82AAFF",
  text: "#A6ACCD",
  textMuted: "#676E95",
  background: "#292D3E",
  backgroundPanel: "#2F3344",
  backgroundElement: "#34394C",
  backgroundMenu: "#232738",
  border: "#4E5579",
  borderActive: "#82AAFF",
  borderSubtle: "#34394C",
  diffAdded: "#C3E88D",
  diffRemoved: "#FF5370",
  diffContext: "#676E95",
  diffAddedBg: "#1A2E1A",
  diffRemovedBg: "#2E1A1A",
  diffHunkHeader: "#82AAFF",
  diffLineNumber: "#676E95",
  markdownText: "#A6ACCD",
  markdownHeading: "#82AAFF",
  markdownLink: "#89DDFF",
  markdownCode: "#C792EA",
  markdownBlockquote: "#676E95",
  markdownEmphasis: "#FFCB6B",
  syntaxComment: "#676E95",
  syntaxKeyword: "#C792EA",
  syntaxFunction: "#82AAFF",
  syntaxVariable: "#A6ACCD",
  syntaxString: "#C3E88D",
  syntaxNumber: "#F78C6C",
  syntaxType: "#FFCB6B",
  syntaxOperator: "#89DDFF",
  syntaxPunctuation: "#A6ACCD",
  thinkingOpacity: 0.6,
};

const SYNTHWAVE84: ThemeColors = {
  primary: "#EC5B2B",
  secondary: "#FF7EDB",
  accent: "#72F1B8",
  error: "#FE4450",
  warning: "#FEDE5D",
  success: "#72F1B8",
  info: "#36F9F6",
  text: "#F0E3FF",
  textMuted: "#848BBD",
  background: "#262335",
  backgroundPanel: "#2A2139",
  backgroundElement: "#34294F",
  backgroundMenu: "#1E1A2E",
  border: "#495495",
  borderActive: "#EC5B2B",
  borderSubtle: "#34294F",
  diffAdded: "#72F1B8",
  diffRemoved: "#FE4450",
  diffContext: "#848BBD",
  diffAddedBg: "#1A2E2E",
  diffRemovedBg: "#2E1A1A",
  diffHunkHeader: "#36F9F6",
  diffLineNumber: "#848BBD",
  markdownText: "#F0E3FF",
  markdownHeading: "#EC5B2B",
  markdownLink: "#36F9F6",
  markdownCode: "#FF7EDB",
  markdownBlockquote: "#848BBD",
  markdownEmphasis: "#FEDE5D",
  syntaxComment: "#848BBD",
  syntaxKeyword: "#FF7EDB",
  syntaxFunction: "#36F9F6",
  syntaxVariable: "#F0E3FF",
  syntaxString: "#72F1B8",
  syntaxNumber: "#F97E72",
  syntaxType: "#FEDE5D",
  syntaxOperator: "#FF7EDB",
  syntaxPunctuation: "#F0E3FF",
  thinkingOpacity: 0.6,
};

const VERCEL: ThemeColors = {
  primary: "#0070F3",
  secondary: "#8E4EC6",
  accent: "#0070F3",
  error: "#E5484D",
  warning: "#F5A623",
  success: "#46A758",
  info: "#0070F3",
  text: "#EDEDED",
  textMuted: "#888888",
  background: "#000000",
  backgroundPanel: "#111111",
  backgroundElement: "#1A1A1A",
  backgroundMenu: "#0A0A0A",
  border: "#333333",
  borderActive: "#0070F3",
  borderSubtle: "#1A1A1A",
  diffAdded: "#46A758",
  diffRemoved: "#E5484D",
  diffContext: "#888888",
  diffAddedBg: "#0D2E1A",
  diffRemovedBg: "#2E0D0D",
  diffHunkHeader: "#0070F3",
  diffLineNumber: "#888888",
  markdownText: "#EDEDED",
  markdownHeading: "#0070F3",
  markdownLink: "#0070F3",
  markdownCode: "#8E4EC6",
  markdownBlockquote: "#888888",
  markdownEmphasis: "#F5A623",
  syntaxComment: "#888888",
  syntaxKeyword: "#0070F3",
  syntaxFunction: "#8E4EC6",
  syntaxVariable: "#EDEDED",
  syntaxString: "#46A758",
  syntaxNumber: "#0070F3",
  syntaxType: "#F5A623",
  syntaxOperator: "#0070F3",
  syntaxPunctuation: "#EDEDED",
  thinkingOpacity: 0.6,
};

const VESPER: ThemeColors = {
  primary: "#FFC799",
  secondary: "#99FFE4",
  accent: "#FFC799",
  error: "#FF8080",
  warning: "#FFC799",
  success: "#99FFE4",
  info: "#FFC799",
  text: "#FFFFFF",
  textMuted: "#A0A0A0",
  background: "#101010",
  backgroundPanel: "#101010",
  backgroundElement: "#101010",
  backgroundMenu: "#0A0A0A",
  border: "#8B8B8B",
  borderActive: "#FFC799",
  borderSubtle: "#333333",
  diffAdded: "#99FFE4",
  diffRemoved: "#FF8080",
  diffContext: "#A0A0A0",
  diffAddedBg: "#0D2E2E",
  diffRemovedBg: "#2E0D0D",
  diffHunkHeader: "#FFC799",
  diffLineNumber: "#A0A0A0",
  markdownText: "#FFFFFF",
  markdownHeading: "#FFC799",
  markdownLink: "#99FFE4",
  markdownCode: "#FFC799",
  markdownBlockquote: "#A0A0A0",
  markdownEmphasis: "#FFC799",
  syntaxComment: "#8B8B8B",
  syntaxKeyword: "#A0A0A0",
  syntaxFunction: "#FFC799",
  syntaxVariable: "#FFFFFF",
  syntaxString: "#99FFE4",
  syntaxNumber: "#FFC799",
  syntaxType: "#FFC799",
  syntaxOperator: "#A0A0A0",
  syntaxPunctuation: "#FFFFFF",
  thinkingOpacity: 0.6,
};

const ZENBURN: ThemeColors = {
  primary: "#8CD0D3",
  secondary: "#DC8CC3",
  accent: "#93E0E3",
  error: "#CC9393",
  warning: "#F0DFAF",
  success: "#7F9F7F",
  info: "#DFAF8F",
  text: "#DCDCCC",
  textMuted: "#9F9F9F",
  background: "#3F3F3F",
  backgroundPanel: "#4F4F4F",
  backgroundElement: "#5F5F5F",
  backgroundMenu: "#353535",
  border: "#6F6F6F",
  borderActive: "#8CD0D3",
  borderSubtle: "#5F5F5F",
  diffAdded: "#7F9F7F",
  diffRemoved: "#CC9393",
  diffContext: "#9F9F9F",
  diffAddedBg: "#2E3A2E",
  diffRemovedBg: "#3A2E2E",
  diffHunkHeader: "#8CD0D3",
  diffLineNumber: "#9F9F9F",
  markdownText: "#DCDCCC",
  markdownHeading: "#8CD0D3",
  markdownLink: "#93E0E3",
  markdownCode: "#DC8CC3",
  markdownBlockquote: "#9F9F9F",
  markdownEmphasis: "#F0DFAF",
  syntaxComment: "#7F9F7F",
  syntaxKeyword: "#F0DFAF",
  syntaxFunction: "#DFAF8F",
  syntaxVariable: "#DCDCCC",
  syntaxString: "#CC9393",
  syntaxNumber: "#8CD0D3",
  syntaxType: "#DFAF8F",
  syntaxOperator: "#F0DFAF",
  syntaxPunctuation: "#DCDCCC",
  thinkingOpacity: 0.6,
};

// ── Theme registry ───────────────────────────────────────────────────────────

export const THEMES: Record<string, ThemeDefinition> = {
  opencode: { name: "OpenCode", appearance: "dark", colors: OPENCODE_DARK },
  aura: { name: "Aura", appearance: "dark", colors: AURA },
  ayu: { name: "Ayu", appearance: "dark", colors: AYU },
  carbonfox: { name: "Carbonfox", appearance: "dark", colors: CARBONFOX },
  "catppuccin-mocha": { name: "Catppuccin Mocha", appearance: "dark", colors: CATPPUCCIN_MOCHA },
  "catppuccin-frappe": { name: "Catppuccin Frappé", appearance: "dark", colors: CATPPUCCIN_FRAPPE },
  "catppuccin-latte": { name: "Catppuccin Latte", appearance: "light", colors: CATPPUCCIN_LATTE },
  cobalt2: { name: "Cobalt2", appearance: "dark", colors: COBALT2 },
  cursor: { name: "Cursor", appearance: "dark", colors: CURSOR },
  dracula: { name: "Dracula", appearance: "dark", colors: DRACULA },
  everforest: { name: "Everforest", appearance: "dark", colors: EVERFOREST },
  flexoki: { name: "Flexoki", appearance: "dark", colors: FLEXOKI },
  github: { name: "GitHub", appearance: "dark", colors: GITHUB },
  gruvbox: { name: "Gruvbox", appearance: "dark", colors: GRUVBOX },
  kanagawa: { name: "Kanagawa", appearance: "dark", colors: KANAGAWA },
  material: { name: "Material", appearance: "dark", colors: MATERIAL },
  matrix: { name: "Matrix", appearance: "dark", colors: MATRIX },
  mercury: { name: "Mercury", appearance: "dark", colors: MERCURY },
  monokai: { name: "Monokai", appearance: "dark", colors: MONOKAI },
  nightowl: { name: "Night Owl", appearance: "dark", colors: NIGHTOWL },
  nord: { name: "Nord", appearance: "dark", colors: NORD },
  "one-dark": { name: "One Dark", appearance: "dark", colors: ONE_DARK },
  orng: { name: "ORNG", appearance: "dark", colors: ORNG },
  palenight: { name: "Palenight", appearance: "dark", colors: PALENIGHT },
  rosepine: { name: "Rosé Pine", appearance: "dark", colors: ROSEPINE },
  solarized: { name: "Solarized", appearance: "dark", colors: SOLARIZED },
  synthwave84: { name: "Synthwave '84", appearance: "dark", colors: SYNTHWAVE84 },
  tokyonight: { name: "Tokyo Night", appearance: "dark", colors: TOKYONIGHT },
  vercel: { name: "Vercel", appearance: "dark", colors: VERCEL },
  vesper: { name: "Vesper", appearance: "dark", colors: VESPER },
  zenburn: { name: "Zenburn", appearance: "dark", colors: ZENBURN },
};

export const DEFAULT_THEME = "opencode";

type ThemeContextValue = {
  theme: Accessor<ThemeColors>;
  themeName: Accessor<string>;
  setTheme: (name: string) => void;
  themeNames: () => string[];
};

const ThemeContext = createContext<ThemeContextValue>();

export function ThemeProvider(props: { children: JSX.Element }) {
  const kv = useKV();
  const savedTheme = kv.get("theme", DEFAULT_THEME);
  const initial = THEMES[savedTheme] ? savedTheme : DEFAULT_THEME;

  const [themeName, setThemeName] = createSignal(initial);
  const theme = createMemo(() => {
    const name = themeName();
    return THEMES[name]?.colors ?? THEMES[DEFAULT_THEME]!.colors;
  });

  const value: ThemeContextValue = {
    theme,
    themeName,
    setTheme(name: string) {
      if (THEMES[name]) {
        setThemeName(name);
        kv.set("theme", name);
      }
    },
    themeNames() {
      return Object.keys(THEMES);
    },
  };

  return (
    <ThemeContext.Provider value={value}>
      {props.children}
    </ThemeContext.Provider>
  );
}

export function useTheme(): ThemeColors {
  const ctx = useContext(ThemeContext);
  if (!ctx) throw new Error("useTheme must be used within ThemeProvider");
  return ctx.theme();
}

export function useThemeContext(): ThemeContextValue {
  const ctx = useContext(ThemeContext);
  if (!ctx) throw new Error("useThemeContext must be used within ThemeProvider");
  return ctx;
}
